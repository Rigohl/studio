<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo de Carga de Archivos - DualMuse</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .file-upload-area {
            border: 2px dashed #d1d5db;
            transition: all 0.3s ease;
        }
        .file-upload-area:hover {
            border-color: #3b82f6;
            background-color: #f8fafc;
        }
        .file-upload-area.dragover {
            border-color: #3b82f6;
            background-color: #eff6ff;
        }
        .file-item {
            background-color: #f3f4f6;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .file-info {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .file-name {
            font-weight: 500;
            color: #1f2937;
        }
        .file-size {
            font-size: 0.75rem;
            color: #6b7280;
        }
        .remove-btn {
            color: #dc2626;
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
        }
        .remove-btn:hover {
            background-color: #fee2e2;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto py-12 px-4">
        <div class="max-w-4xl mx-auto">
            <!-- Header -->
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-gray-900 mb-2">üéµ DualMuse - Carga de Archivos</h1>
                <p class="text-gray-600">Sube archivos de referencia para tu canci√≥n personalizada</p>
            </div>
            
            <!-- Upload Form -->
            <div class="bg-white rounded-lg shadow-lg p-8">
                <form id="uploadForm" class="space-y-6">
                    <!-- Basic Info -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Tu Correo Electr√≥nico</label>
                            <input type="email" id="email" placeholder="Para enviarte la canci√≥n final" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">¬øPara qui√©n es la canci√≥n?</label>
                            <input type="text" id="dedicatedTo" placeholder="Ej: Mi madre, Ana, mi futuro esposo..." 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Vierte aqu√≠ tus recuerdos y emociones</label>
                        <textarea id="story" rows="4" placeholder="Describe vuestra historia, momentos especiales, an√©cdotas, lo que sientes..." 
                                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                    </div>
                    
                    <!-- File Upload Sections -->
                    <div class="border-t pt-6">
                        <h3 class="text-lg font-semibold mb-6 flex items-center gap-2">
                            üìÅ Archivos de Referencia (Opcional)
                        </h3>
                        
                        <!-- Audio Reference -->
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">üéµ Audio de Referencia</label>
                            <div class="file-upload-area rounded-lg p-6 text-center cursor-pointer" 
                                 onclick="document.getElementById('audioInput').click()"
                                 ondragover="handleDragOver(event, this)" 
                                 ondragleave="handleDragLeave(event, this)" 
                                 ondrop="handleDrop(event, 'audio')">
                                <div class="flex flex-col items-center">
                                    <svg class="w-8 h-8 text-gray-400 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                                    </svg>
                                    <p class="text-sm text-gray-600 mb-1">Arrastra archivos de audio aqu√≠ o haz clic para seleccionar</p>
                                    <p class="text-xs text-gray-500">Formatos: MP3, WAV, M4A (m√°x. 25MB por archivo)</p>
                                </div>
                            </div>
                            <input type="file" id="audioInput" accept="audio/*" multiple class="hidden" 
                                   onchange="handleFiles(this.files, 'audio')">
                            <div id="audioFiles" class="mt-4"></div>
                            <p class="text-xs text-gray-500 mt-2">Sube canciones que te gusten como referencia de estilo o melod√≠a</p>
                        </div>
                        
                        <!-- Image Inspiration -->
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">üñºÔ∏è Im√°genes de Inspiraci√≥n</label>
                            <div class="file-upload-area rounded-lg p-6 text-center cursor-pointer" 
                                 onclick="document.getElementById('imageInput').click()"
                                 ondragover="handleDragOver(event, this)" 
                                 ondragleave="handleDragLeave(event, this)" 
                                 ondrop="handleDrop(event, 'image')">
                                <div class="flex flex-col items-center">
                                    <svg class="w-8 h-8 text-gray-400 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                    </svg>
                                    <p class="text-sm text-gray-600 mb-1">Arrastra im√°genes aqu√≠ o haz clic para seleccionar</p>
                                    <p class="text-xs text-gray-500">Formatos: JPG, PNG, GIF (m√°x. 10MB por archivo)</p>
                                </div>
                            </div>
                            <input type="file" id="imageInput" accept="image/*" multiple class="hidden" 
                                   onchange="handleFiles(this.files, 'image')">
                            <div id="imageFiles" class="mt-4"></div>
                            <p class="text-xs text-gray-500 mt-2">Fotos, artwork o im√°genes que capturen la esencia de tu historia</p>
                        </div>
                        
                        <!-- Lyrics File -->
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">üìù Archivo de Letra/Poema</label>
                            <div class="file-upload-area rounded-lg p-6 text-center cursor-pointer" 
                                 onclick="document.getElementById('lyricsInput').click()"
                                 ondragover="handleDragOver(event, this)" 
                                 ondragleave="handleDragLeave(event, this)" 
                                 ondrop="handleDrop(event, 'lyrics')">
                                <div class="flex flex-col items-center">
                                    <svg class="w-8 h-8 text-gray-400 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                    </svg>
                                    <p class="text-sm text-gray-600 mb-1">Arrastra un archivo de texto aqu√≠ o haz clic para seleccionar</p>
                                    <p class="text-xs text-gray-500">Formatos: TXT, DOC, DOCX, PDF (m√°x. 5MB)</p>
                                </div>
                            </div>
                            <input type="file" id="lyricsInput" accept=".txt,.doc,.docx,.pdf" class="hidden" 
                                   onchange="handleFiles(this.files, 'lyrics')">
                            <div id="lyricsFiles" class="mt-4"></div>
                            <p class="text-xs text-gray-500 mt-2">Si ya tienes una letra escrita o un poema que quieres convertir en canci√≥n</p>
                        </div>
                    </div>
                    
                    <!-- Summary and Submit -->
                    <div id="uploadSummary" class="hidden bg-green-50 p-4 rounded-lg border border-green-200">
                        <h4 class="font-semibold text-green-800 mb-2">Archivos cargados:</h4>
                        <ul id="summaryList" class="text-sm text-green-700"></ul>
                    </div>
                    
                    <button type="submit" class="w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 transition-colors">
                        Probar Funcionalidad de Carga
                    </button>
                </form>
            </div>
        </div>
    </div>

    <script>
        let uploadedFiles = {
            audio: [],
            image: [],
            lyrics: []
        };

        function handleDragOver(event, element) {
            event.preventDefault();
            element.classList.add('dragover');
        }

        function handleDragLeave(event, element) {
            event.preventDefault();
            element.classList.remove('dragover');
        }

        function handleDrop(event, type) {
            event.preventDefault();
            event.target.classList.remove('dragover');
            const files = event.dataTransfer.files;
            handleFiles(files, type);
        }

        function handleFiles(files, type) {
            const maxSizes = { audio: 25, image: 10, lyrics: 5 };
            const maxSize = maxSizes[type] * 1024 * 1024; // Convert to bytes
            
            Array.from(files).forEach(file => {
                if (file.size > maxSize) {
                    alert(`El archivo "${file.name}" es demasiado grande. M√°ximo ${maxSizes[type]}MB.`);
                    return;
                }
                
                uploadedFiles[type].push(file);
            });
            
            updateFileDisplay(type);
            updateSummary();
        }

        function updateFileDisplay(type) {
            const container = document.getElementById(`${type}Files`);
            container.innerHTML = '';
            
            uploadedFiles[type].forEach((file, index) => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                fileItem.innerHTML = `
                    <div class="file-info">
                        <span class="file-name">${file.name}</span>
                        <span class="file-size">${formatFileSize(file.size)}</span>
                    </div>
                    <div class="remove-btn" onclick="removeFile('${type}', ${index})">
                        ‚ùå
                    </div>
                `;
                container.appendChild(fileItem);
            });
        }

        function removeFile(type, index) {
            uploadedFiles[type].splice(index, 1);
            updateFileDisplay(type);
            updateSummary();
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function updateSummary() {
            const summary = document.getElementById('uploadSummary');
            const summaryList = document.getElementById('summaryList');
            
            const totalFiles = uploadedFiles.audio.length + uploadedFiles.image.length + uploadedFiles.lyrics.length;
            
            if (totalFiles > 0) {
                summary.classList.remove('hidden');
                summaryList.innerHTML = '';
                
                if (uploadedFiles.audio.length > 0) {
                    const li = document.createElement('li');
                    li.textContent = `‚Ä¢ ${uploadedFiles.audio.length} archivo(s) de audio de referencia`;
                    summaryList.appendChild(li);
                }
                
                if (uploadedFiles.image.length > 0) {
                    const li = document.createElement('li');
                    li.textContent = `‚Ä¢ ${uploadedFiles.image.length} imagen(es) de inspiraci√≥n`;
                    summaryList.appendChild(li);
                }
                
                if (uploadedFiles.lyrics.length > 0) {
                    const li = document.createElement('li');
                    li.textContent = `‚Ä¢ ${uploadedFiles.lyrics.length} archivo(s) de letra/poema`;
                    summaryList.appendChild(li);
                }
            } else {
                summary.classList.add('hidden');
            }
        }

        document.getElementById('uploadForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                email: document.getElementById('email').value,
                dedicatedTo: document.getElementById('dedicatedTo').value,
                story: document.getElementById('story').value,
                uploadedFiles: uploadedFiles
            };
            
            console.log('Form data:', formData);
            alert('¬°Formulario enviado! Revisa la consola para ver los archivos cargados.');
        });
    </script>
</body>
</html>